<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" revision="1.0.0" language="C" filename="D:\Pesquisa\Projects\ffmpeg-analysis\_cppstats_featurelocations\FFmpeg\libavutil\tests\pixfmt_best.c">

















<cpp:include>#<cpp:directive>include</cpp:directive> <cpp:file>"libavutil/pixdesc.c"</cpp:file></cpp:include>

<decl_stmt><decl><type><specifier>static</specifier> <specifier>const</specifier> <name><name>enum</name> <name>AVPixelFormat</name></name></type> <name><name>pixfmt_list</name><index>[]</index></name> <init>= <expr><block>{
<expr><name>AV_PIX_FMT_MONOWHITE</name></expr>,
<expr><name>AV_PIX_FMT_GRAY8</name></expr>,
<expr><name>AV_PIX_FMT_GRAY10</name></expr>,
<expr><name>AV_PIX_FMT_GRAY16</name></expr>,
<expr><name>AV_PIX_FMT_YUV420P</name></expr>,
<expr><name>AV_PIX_FMT_YUV420P10</name></expr>,
<expr><name>AV_PIX_FMT_YUV420P16</name></expr>,
<expr><name>AV_PIX_FMT_YUV422P</name></expr>,
<expr><name>AV_PIX_FMT_YUV422P10</name></expr>,
<expr><name>AV_PIX_FMT_YUV422P16</name></expr>,
<expr><name>AV_PIX_FMT_YUV444P</name></expr>,
<expr><name>AV_PIX_FMT_YUV444P10</name></expr>,
<expr><name>AV_PIX_FMT_YUV444P16</name></expr>,
<expr><name>AV_PIX_FMT_RGB565</name></expr>,
<expr><name>AV_PIX_FMT_RGB24</name></expr>,
<expr><name>AV_PIX_FMT_RGB48</name></expr>,
<expr><name>AV_PIX_FMT_VDPAU</name></expr>,
<expr><name>AV_PIX_FMT_VAAPI</name></expr>,
}</block></expr></init></decl>;</decl_stmt>

<function><type><specifier>static</specifier> <name><name>enum</name> <name>AVPixelFormat</name></name></type> <name>find_best</name><parameter_list>(<parameter><decl><type><name><name>enum</name> <name>AVPixelFormat</name></name></type> <name>pixfmt</name></decl></parameter>)</parameter_list>
<block>{<block_content>
<decl_stmt><decl><type><name><name>enum</name> <name>AVPixelFormat</name></name></type> <name>best</name> <init>= <expr><name>AV_PIX_FMT_NONE</name></expr></init></decl>;</decl_stmt>
<decl_stmt><decl><type><name>int</name></type> <name>i</name></decl>;</decl_stmt>
<for>for <control>(<init><expr><name>i</name> <operator>=</operator> <literal type="number">0</literal></expr>;</init> <condition><expr><name>i</name> <operator>&lt;</operator> <call><name>FF_ARRAY_ELEMS</name><argument_list>(<argument><expr><name>pixfmt_list</name></expr></argument>)</argument_list></call></expr>;</condition> <incr><expr><name>i</name><operator>++</operator></expr></incr>)</control><block type="pseudo"><block_content>
<expr_stmt><expr><name>best</name> <operator>=</operator> <call><name>av_find_best_pix_fmt_of_2</name><argument_list>(<argument><expr><name>best</name></expr></argument>, <argument><expr><name><name>pixfmt_list</name><index>[<expr><name>i</name></expr>]</index></name></expr></argument>,
<argument><expr><name>pixfmt</name></expr></argument>, <argument><expr><literal type="number">0</literal></expr></argument>, <argument><expr><name>NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></for>
<return>return <expr><name>best</name></expr>;</return>
</block_content>}</block></function>

<function><type><name>int</name></type> <name>main</name><parameter_list>(<parameter><decl><type><name>void</name></type></decl></parameter>)</parameter_list>
<block>{<block_content>
<decl_stmt><decl><type><name><name>enum</name> <name>AVPixelFormat</name></name></type> <name>output</name></decl>;</decl_stmt>
<decl_stmt><decl><type><name>int</name></type> <name>i</name></decl>, <decl><type ref="prev"/><name>pass</name> <init>= <expr><literal type="number">0</literal></expr></init></decl>, <decl><type ref="prev"/><name>fail</name> <init>= <expr><literal type="number">0</literal></expr></init></decl>;</decl_stmt>

<cpp:define>#<cpp:directive>define</cpp:directive> <cpp:macro><name>TEST</name><parameter_list>(<parameter><type><name>input</name></type></parameter>, <parameter><type><name>expected</name></type></parameter>)</parameter_list></cpp:macro> <cpp:value>do { output = find_best(input); if (output != expected) { printf("Matching %s: got %s, expected %s\n", av_get_pix_fmt_name(input), av_get_pix_fmt_name(output), av_get_pix_fmt_name(expected)); ++fail; } else ++pass; } while (0)</cpp:value></cpp:define>












<for>for <control>(<init><expr><name>i</name> <operator>=</operator> <literal type="number">0</literal></expr>;</init> <condition><expr><name>i</name> <operator>&lt;</operator> <call><name>FF_ARRAY_ELEMS</name><argument_list>(<argument><expr><name>pixfmt_list</name></expr></argument>)</argument_list></call></expr>;</condition> <incr><expr><name>i</name><operator>++</operator></expr></incr>)</control><block type="pseudo"><block_content>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name><name>pixfmt_list</name><index>[<expr><name>i</name></expr>]</index></name></expr></argument>, <argument><expr><name><name>pixfmt_list</name><index>[<expr><name>i</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></for>


<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_MONOBLACK</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_MONOWHITE</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_NV12</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV420P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_P010</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV420P10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_P016</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV420P16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_NV16</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_NV24</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUYV422</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_UYVY422</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_BGR565</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB565</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_BGR24</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB24</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GBRP</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB24</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_0RGB</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB24</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GBRP16</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>


<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YA8</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_GRAY8</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YA16</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_GRAY16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUVA420P</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV420P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUVA422P</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUVA444P</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_AYUV64</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGBA</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB24</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_ABGR</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB24</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GBRAP</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB24</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGBA64</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_BGRA64</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GBRAP16</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>


<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GRAY12</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_GRAY16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV410P</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV420P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV411P</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_UYYVYY411</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV440P</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV440P10</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV440P12</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV420P9</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV420P10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV420P12</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV420P16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV444P9</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV444P12</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_BGR4</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB565</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGB444</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB565</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGB555</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB565</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GBRP10</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GBRAP10</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GBRAP12</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>


<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GRAY10BE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_GRAY10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GRAY10LE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_GRAY10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GRAY16BE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_GRAY16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_GRAY16LE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_GRAY16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV422P10BE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV422P10LE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV422P10</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV444P16BE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_YUV444P16LE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_YUV444P16</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGB565BE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB565</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGB565LE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB565</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGB48BE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_RGB48LE</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_RGB48</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>


<expr_stmt><expr><call><name>TEST</name><argument_list>(<argument><expr><name>AV_PIX_FMT_DXVA2_VLD</name></expr></argument>, <argument><expr><name>AV_PIX_FMT_VDPAU</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<expr_stmt><expr><call><name>printf</name><argument_list>(<argument><expr><literal type="string">"%d tests passed, %d tests failed.\n"</literal></expr></argument>, <argument><expr><name>pass</name></expr></argument>, <argument><expr><name>fail</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<return>return <expr><operator>!</operator><operator>!</operator><name>fail</name></expr>;</return>
</block_content>}</block></function>
</unit>
